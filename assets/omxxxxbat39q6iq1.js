import{j as e,M as g,r as h,av as C}from"./izh0i1dfnf8ev7x1.js";import{ci as x,bN as E,cj as k,bO as L,ck as T,cl as A,cm as w,cn as F}from"./fc2hzad6rtrm7s5f.js";import{a2 as z,e3 as j,V as M,d as R,cq as P,P as b,a as v,bT as _,ex as G,ey as V}from"./hggowi1ggrzb09yc.js";import{f as $}from"./jilieov1qbeiw46w.js";function D({clientThreadId:t,turnIndex:n,messageId:s,scrollToHeader:r=x.Citations,shouldAnimateScroll:c,isInSidebar:o=!1}){const{value:i}=z("756982148"),[l,u]=q(t,s),a=j(),p=M(t,f=>_(G(f?.tree.getMessage(s)))),d={clientThreadId:t,messageId:s,turnIndex:n},S=$(p,f=>f.entries).toSorted((f,N)=>(N?.pub_date??0)-(f?.pub_date??0));return e.jsxs("div",{className:R("flex w-full flex-col bg-token-main-surface-primary",o?"mt-[calc(var(--threadFlyOut-leading-height,57px)*-1)]":"mt-0",!a||!o?"border-t border-token-border-light":""),children:[i&&u&&u.length>0&&e.jsx(m,{title:e.jsx(g,{id:"fYO0jL",defaultMessage:"Links"}),items:u,analyticsMetadata:{...d,linkType:"links"},scrollToHeader:r===x.Links,shouldAnimateScroll:c,messageId:s}),e.jsx(m,{title:e.jsx(g,{id:"dlVlo6",defaultMessage:"Citations"}),items:l,analyticsMetadata:{...d,linkType:"citation"},scrollToHeader:r===x.Citations,shouldAnimateScroll:c,messageId:s}),e.jsx(m,{title:e.jsx(g,{id:"Gz+4tE",defaultMessage:"More"}),items:S,analyticsMetadata:{...d,linkType:"search_result"},messageId:s,scrollToHeader:r===x.SearchResults,shouldAnimateScroll:c})]},`${n}-${t}`)}function m({title:t,items:n,analyticsMetadata:s,scrollToHeader:r,messageId:c,shouldAnimateScroll:o}){const i=h.useRef(null),l=j();return h.useEffect(()=>{i.current&&r&&(l?i.current.scrollIntoView({behavior:o?"smooth":"instant"}):setTimeout(()=>{i.current&&i.current.scrollIntoView({behavior:o?"smooth":"instant"})},300))},[r,o,l]),!n||n.length===0?null:e.jsxs("div",{ref:i,children:[e.jsx(y,{className:R("sticky top-0 z-[1] flex h-[calc(var(--screen-thread-header-min-height,60px)+1px)] items-center border-b border-token-border-sharp bg-token-main-surface-primary px-6 pt-4 font-medium text-token-text-primary",l?"pb-3.5 text-panel-title":"pb-4 text-sm"),children:t}),e.jsx("div",{className:"flex flex-col px-3 py-2",children:n.map((u,a)=>e.jsx(y,{index:a,children:e.jsx(H,{item:u,analyticsMetadata:{...s,groupIndex:a},messageId:c},a)},`${t}-${a}`))})]})}function y({children:t,index:n=0,className:s=""}){return e.jsx(C.div,{className:s,initial:{opacity:0},animate:{opacity:1},transition:{delay:(n+1)*.03+.2},children:t})}function H({item:t,analyticsMetadata:n,messageId:s}){const r=t.attribution??E(t.url,"short"),c=i=>"ref_id"in i&&"content_type"in i;return e.jsxs(O,{analyticsMetadata:n,href:t.url,target:"_blank",rel:"noopener",className:"flex flex-col gap-0.5 rounded-xl px-3 py-2.5 hover:bg-token-main-surface-secondary",onMouseEnter:()=>{k.setHighlightBySource(s,t)},onMouseLeave:()=>{k.clearHighlights()},children:[e.jsxs("div",{className:"line-clamp-1 flex h-6 items-center gap-2 text-xs",children:[e.jsx(L,{url:t.url,className:"icon-sm rounded-full bg-token-main-surface-primary object-cover",size:32,minSize:20,fallback:e.jsx(T,{className:"icon-sm text-token-text-quaternary"})}),r,c(t)&&e.jsx(A,{searchResult:t,className:"inline h-4 w-4 text-token-text-tertiary"})]}),e.jsx("div",{className:"line-clamp-2 text-sm font-semibold",children:t.title}),(t.pub_date??t.snippet)&&e.jsxs("div",{className:"line-clamp-2 text-sm font-normal leading-snug text-token-text-secondary",children:[t.pub_date&&e.jsx(w,{date:t.pub_date}),t.pub_date&&t.snippet&&" â€” ",t.snippet]})]})}const O=h.forwardRef(function(n,s){const{analyticsMetadata:r,...c}=n,{groupIndex:o,linkType:i,...l}=r,u={...P(l),url:n.href,section_index:(o+1).toString(),link_type:"text",section:i,section_location:"sidebar"};return h.useEffect(()=>{b.logEventWithStatsig(v.linkAction,"link_action",{...u,action:"show"})},[]),e.jsx("a",{ref:s,...c,onClick:a=>{n.onClick?.(a),a.stopPropagation(),b.logEventWithStatsig(v.linkAction,"link_action",{...u,action:"click"})}})}),q=(t,n)=>M(t,s=>{const r=_(V(s?.tree.getMessage(n))),c=F(r);let o=[];const i=r.filter(a=>a.type==="navigation");i.length>0&&(o=i.flatMap(a=>a.domains.flatMap(p=>[{title:p.title,snippet:p.domain,url:p.url},...p.sub_domains.map(d=>({title:d.title,snippet:p.domain,url:d.url}))])));const l=r.filter(a=>a.type==="tldr").filter(a=>!a.used_as_navigation);l.length>0&&l.forEach(a=>{o.push({title:a.display_title,url:a.url})});const u=o.length>0?o:void 0;return[c,u]});export{y as AnimatedContainer,D as SearchSources};
//# sourceMappingURL=omxxxxbat39q6iq1.js.map
