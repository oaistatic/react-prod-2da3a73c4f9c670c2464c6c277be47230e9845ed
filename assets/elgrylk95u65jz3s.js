import{r as c,j as e,M as x,c as b,f as oe,d as $,b as re}from"./izh0i1dfnf8ev7x1.js";import{h as le,eG as ie,E as U,fO as ce,d as I,bW as E,w as ue,cL as de,bY as T,dv as me,a2 as fe,bh as he}from"./hggowi1ggrzb09yc.js";import{fz as k,ma as xe,cJ as m,k0 as Z,az as G,c1 as K,bE as ge,an as X,dy as we,dz as je,c2 as pe,fa as ye}from"./fc2hzad6rtrm7s5f.js";const ve=t=>c.createElement("svg",{width:24,height:24,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",...t},c.createElement("path",{d:"M12.75 9.50001C12.75 9.08579 13.0858 8.75001 13.5 8.75001H14.5C14.9142 8.75001 15.25 9.08579 15.25 9.50001V14.5C15.25 14.9142 14.9142 15.25 14.5 15.25H13.5C13.0858 15.25 12.75 14.9142 12.75 14.5V9.50001Z",fill:"currentcolor"}),c.createElement("path",{d:"M9.50001 8.75001C9.08579 8.75001 8.75001 9.08579 8.75001 9.50001V14.5C8.75001 14.9142 9.08579 15.25 9.50001 15.25H10.5C10.9142 15.25 11.25 14.9142 11.25 14.5V9.50001C11.25 9.08579 10.9142 8.75001 10.5 8.75001H9.50001Z",fill:"currentcolor"}),c.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M1.97144 12C1.97144 6.46138 6.46138 1.97144 12 1.97144C17.5386 1.97144 22.0286 6.46138 22.0286 12C22.0286 17.5386 17.5386 22.0286 12 22.0286C6.46138 22.0286 1.97144 17.5386 1.97144 12ZM12 4.02858C7.59751 4.02858 4.02858 7.59751 4.02858 12C4.02858 16.4025 7.59751 19.9714 12 19.9714C16.4025 19.9714 19.9714 16.4025 19.9714 12C19.9714 7.59751 16.4025 4.02858 12 4.02858Z",fill:"currentcolor"})),L={messages:le({delete:{id:"jawbone.delete",defaultMessage:"Delete"},pause:{id:"jawbone.pause",defaultMessage:"Pause"},pauseFailure:{id:"jawbone.pauseAutomationFailure",defaultMessage:"Failed to pause the automation"},resume:{id:"jawbone.resume",defaultMessage:"Resume"},enableFailure:{id:"jawbone.resumeFailure",defaultMessage:"Failed to resume the automation"},notificationsTitle:{id:"jawbone.notificationsTitle",defaultMessage:"Notifications"},notificationsDesktopAndMobile:{id:"jawbone.notificationsDesktopAndMobile",defaultMessage:"Desktop & mobile"},notificationsEmail:{id:"jawbone.notificationsEmail",defaultMessage:"Email"}}),components:{nextRunTime:t=>e.jsx(x,{id:"jawbone.nextRunTime",defaultMessage:"Scheduled: {localizedNextRunTime}",values:{localizedNextRunTime:t}})}};function De({targetTimeUTC:t,useShortForm:s=!1}){return e.jsx(ie,{fallback:void 0,name:"JawboneLocalizedRuntime",children:e.jsx(be,{targetTimeUTC:t,useShortForm:s})})}function be({targetTimeUTC:t,useShortForm:s=!1}){const r=b(),{localDate:a,today:l,tomorrow:o,dayAfterTomorrow:n,newWeek:i,localizedTime:d}=Ce(t,r.locale);if(a.toDateString()===l.toDateString())return k.runtimeToday(d);if(a.toDateString()===o.toDateString())return k.runtimeTomorrow(d);if(a>=n&&a<i){const u=new Intl.DateTimeFormat(r.locale,{weekday:"long"}).format(a);return k.runtimeNextFiveDays(u,d)}else if(a.getFullYear()===l.getFullYear()){const u=new Intl.DateTimeFormat(r.locale,{month:"long",day:"numeric"}).format(a);return s?u:k.runtimeThisYear(u,d)}else{const u=new Intl.DateTimeFormat(r.locale,{year:"numeric",month:"short",day:"numeric"}).format(a);return s?u:k.runtimeOutsideThisYear(u,d)}}function Ce(t,s){const r=new Date(t);if(isNaN(r.getTime()))throw new Error(`Invalid targetTimeUTC provided: ${t}`);const a=r,l=new Date;l.setHours(0,0,0,0);const o=new Date(l);o.setDate(o.getDate()+1);const n=new Date(l);n.setDate(n.getDate()+2);const i=new Date(l);i.setDate(l.getDate()+7);const d=new Intl.DateTimeFormat(s,{hour:"numeric",minute:a.getMinutes()===0?void 0:"numeric",hour12:!0}).format(a);return{localDate:a,today:l,tomorrow:o,dayAfterTomorrow:n,newWeek:i,localizedTime:d}}function Me({item:t,onClose:s,onConfirm:r}){const a=b(),l=U(),{mutate:o,isPending:n}=xe({automation_id:t.id,onSuccess:()=>{l.success(a.formatMessage(m.deleteModalSuccess),{hasCloseButton:!0}),r()},onError:()=>{l.danger(a.formatMessage(m.deleteModalFailure),{hasCloseButton:!0})}});return e.jsx(Z,{isOpen:!0,title:a.formatMessage(m.deleteModalTitle),primaryButtonColor:"danger",onClose:s,confirmText:a.formatMessage(L.messages.delete),onConfirm:()=>{o()},loading:n,children:e.jsx("div",{className:"text-sm",children:e.jsx(x,{...m.deleteModalConfirmation})})})}const Se=t=>c.createElement("svg",{width:24,height:24,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",...t},c.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M8.29289 4.29289C8.68342 3.90237 9.31658 3.90237 9.70711 4.29289L16.7071 11.2929C17.0976 11.6834 17.0976 12.3166 16.7071 12.7071L9.70711 19.7071C9.31658 20.0976 8.68342 20.0976 8.29289 19.7071C7.90237 19.3166 7.90237 18.6834 8.29289 18.2929L14.5858 12L8.29289 5.70711C7.90237 5.31658 7.90237 4.68342 8.29289 4.29289Z",fill:"currentColor"})),y=c.createContext({scheduleComponents:{frequency:"custom"},setFrequency:()=>{},setStartDate:()=>{},setByDay:()=>{},setByMonthDay:()=>{},setByYearDay:()=>{},setByMonth:()=>{},setTime:()=>{},startDate:void 0,nextRunTimes:[],scheduleErrors:void 0});function st({initialScheduleComponents:t,nextRunTimes:s,children:r}){const[a,l]=c.useState(t),[o,n]=c.useState(void 0),[i,d]=c.useState(void 0);return e.jsx(y.Provider,{value:{scheduleComponents:a,setFrequency:u=>{l({...a,frequency:u})},setStartDate:u=>{n(u),d(Te(u)),l({...a,start_time:u.toISOString()})},setByDay:u=>{l({...a,by_day:u})},setByMonthDay:u=>{l({...a,by_month_day:u})},setByYearDay:u=>{l({...a,by_year_day:u})},setByMonth:u=>{l({...a,by_month:u})},setTime:(u,g)=>{l({...a,by_hour:u,by_minute:g,by_second:0})},startDate:o,scheduleErrors:a.frequency!=="once"?void 0:i,nextRunTimes:s},children:r})}function Te(t){let s=!1;const r=new Date;r.setFullYear(r.getFullYear()+2),t.getTime()>=r.getTime()&&(s=!0);let a=!1;const l=new Date;if(l.setSeconds(0,0),t.getTime()<l.getTime()&&(a=!0),s||a)return{tooFarInFuture:s,inPast:a}}function Q(t){switch(t.frequency){case"once":return t.start_time?new Date(t.start_time):void 0;case"daily":case"weekly":case"monthly":case"yearly":return t.by_hour==null||t.by_minute==null?void 0:new Date(0,0,0,t.by_hour,t.by_minute);case"custom":return}}function Ne(t,s){const r=s.scheduleComponents.start_time?new Date(s.scheduleComponents.start_time):new Date;r.setHours(t.getHours(),t.getMinutes()),s.setStartDate(r)}function Fe(t,s){const r=Q(s.scheduleComponents),a=new Date(t);a.setHours(r?.getHours()??0,r?.getMinutes()??0),s.setStartDate(a)}function ke({initialDate:t,onClick:s}){const r=b(),{scheduleComponents:a}=c.useContext(y),l=c.useMemo(()=>Ee(a),[a]),[o,n]=c.useState(t),d=new Intl.DateTimeFormat(r.locale,{month:"short",year:"numeric"}).format(o);return e.jsxs("div",{className:"mx-5 my-2 flex flex-col gap-0.5",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-grow text-lg font-semibold",children:d}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(Y,{onClick:()=>n(new Date(o.getFullYear(),o.getMonth()-1,1)),children:e.jsx(ce,{className:"icon-sm"})}),e.jsx(Y,{onClick:()=>{n(new Date(o.getFullYear(),o.getMonth()+1,1))},children:e.jsx(Se,{className:"icon-sm"})})]})]}),e.jsx(_e,{visibleDate:o,selectedDate:l,onClick:s})]})}function Y(t){const{children:s,...r}=t;return e.jsx("button",{...r,className:"flex h-10 w-10 items-center justify-center",children:s})}function Ee(t){return t.start_time?new Date(t.start_time):void 0}function V(t,s){return new Date(t,s+1,0).getDate()}function Ie(t,s){return new Date(t,s,1).getDay()}function _e({visibleDate:t,selectedDate:s,onClick:r}){const a=b(),l=c.useContext(y),o=6,n=c.useMemo(()=>{const u=t.getFullYear(),g=t.getMonth(),j=V(u,g),C=Ie(u,g),h=[];for(let w=C-1;w>=0;w--)h.push(new Date(u,g-1,V(u,g-1)-w));for(let w=1;w<=j;w++)h.push(new Date(u,g,w));const v=o*7-h.length;for(let w=1;w<=v;w++)h.push(new Date(u,g+1,w));return h},[t]),i=c.useMemo(()=>{const u=new Intl.DateTimeFormat(a.locale,{weekday:"narrow"});return Array.from({length:7},(g,j)=>u.format(new Date(1970,0,j+4)))},[a.locale]),d=new Date;return d.setHours(0,0,0,0),e.jsxs("div",{children:[e.jsx("div",{className:"flex",children:i.map((u,g)=>e.jsx("div",{className:"flex h-10 w-10 items-center justify-center text-sm font-medium",children:u},g))}),Array.from({length:o}).map((u,g)=>e.jsx("div",{className:"flex",children:n.slice(g*7,(g+1)*7).map(j=>{const C=j>=d;return e.jsx("button",{className:"h-10 w-10",onClick:()=>{C&&(Fe(j,l),r())},children:e.jsx(Je,{dayNumber:j.getDate(),isSelected:!!s&&s.toDateString()===j.toDateString(),isSelectable:C})},j.getDay())})},g))]})}function Je({dayNumber:t,isSelected:s,isSelectable:r}){return e.jsx("div",{className:"h-full w-full p-1",children:e.jsx("div",{className:I("flex h-full w-full items-center justify-center rounded-full text-sm",!r&&"text-token-text-tertiary",!s&&r&&"hover:bg-token-main-surface-secondary",s&&"bg-black font-semibold text-white dark:bg-white dark:text-black"),children:t})})}const Oe="flex-1",Be="max-h-96 overflow-y-auto";function B({rootClassName:t,contentClassName:s,trigger:r,children:a,open:l,modal:o=!0,onOpenChange:n,onCloseAutoFocus:i}){return e.jsx("div",{className:I(t??Oe),children:e.jsxs(E.Root,{open:l,onOpenChange:n,modal:o,children:[r,e.jsx(E.Portal,{children:e.jsx(E.Content,{className:s??Be,side:"bottom",onCloseAutoFocus:i,children:a})})]})})}const Re="w-full justify-start rounded-lg border-token-border-medium";function R({className:t,showError:s=!1,children:r}){return e.jsx(E.Trigger,{className:I(Re,t),style:{borderColor:s?"var(--text-error)":void 0},children:e.jsxs("div",{className:"flex w-full items-center gap-1",children:[e.jsx("div",{className:"flex-grow text-left",children:r}),e.jsx(G,{className:"icon-sm text-token-text-tertiary"})]})})}function H({options:t,initialOption:s,showError:r=!1,onClick:a}){return e.jsx(B,{trigger:e.jsx(R,{showError:r,children:s?.label??t[0].label}),children:e.jsx(ee,{options:t,onClick:a})})}function ee({options:t,onClick:s}){return e.jsx(e.Fragment,{children:t.map((r,a)=>e.jsx(E.Item,{onClick:()=>s?.(r),children:r.label},a))})}function te(t){const s=new Date,r=s.getFullYear(),a=s.getMonth(),l=s.getDate();let o;if(o=t.match(/^(\d{1,2}):(\d{2})\s?([ap]m)$/i),o){let n=parseInt(o[1],10);const i=parseInt(o[2],10),d=o[3].toLowerCase();if(n>=1&&n<=12&&i>=0&&i<=59)return d==="pm"&&n!==12&&(n+=12),d==="am"&&n===12&&(n=0),new Date(r,a,l,n,i)}if(o=t.match(/^([ap]m)\s?(\d{1,2}):(\d{2})$/i),o){let n=parseInt(o[2],10);const i=parseInt(o[3],10),d=o[1].toLowerCase();if(n>=1&&n<=12&&i>=0&&i<=59)return d==="pm"&&n!==12&&(n+=12),d==="am"&&n===12&&(n=0),new Date(r,a,l,n,i)}if(o=t.match(/^(\d{1,2})\s?([ap]m)$/i),o){let n=parseInt(o[1],10);const i=o[2].toLowerCase();if(n===12&&i==="am")return n=0,new Date(r,a,l,n,0);if(n>=1&&n<=11&&i==="pm")return n+=12,new Date(r,a,l,n,0);if(n>=1&&n<=12)return new Date(r,a,l,n,0)}if(o=t.match(/^(\d{1,2}):(\d{2})$/),o){const n=parseInt(o[1],10),i=parseInt(o[2],10);if(n>=0&&n<=23&&i>=0&&i<=59)return new Date(r,a,l,n,i)}if(o=t.match(/^(\d{1,2})(\d{2})$/),o){const n=parseInt(o[1],10),i=parseInt(o[2],10);if(n>=0&&n<=23&&i>=0&&i<=59)return new Date(r,a,l,n,i)}if(o=t.match(/^(\d{1,2})$/),o){const n=parseInt(o[1],10);if(n>=0&&n<=23)return new Date(r,a,l,n,0)}if(o=t.match(/^(\d{1,2}):$/),o){const n=parseInt(o[1],10);if(n>=0&&n<=23)return new Date(r,a,l,n,0)}}function O(t){return te(t)}function W(t){return te(t)!==void 0}function q(t){const s=O(t);return A(s)}function A(t){return t?t.toLocaleTimeString([],{hour:"numeric",minute:"2-digit",hour12:!(new Intl.DateTimeFormat().resolvedOptions().hourCycle==="h23"||new Intl.DateTimeFormat().resolvedOptions().hourCycle==="h24")}):""}function ne(t,s){const r=new Date(0,0,0,t,s);return A(r)}function Ae(t){const s=O(t);return s&&s.setMinutes(0),A(s)}function _(){const t=c.useContext(y),[s,r]=c.useState(!1),[a,l]=c.useState(!0),o=c.useRef(null),n=c.useRef(null),i=c.useMemo(()=>ze(),[]),d=Q(t.scheduleComponents),u=c.useMemo(()=>d??new Date(new Date().setHours(14,0,0,0)),[d]);c.useEffect(()=>{d||P(u,t)},[d,u,t]);const g=A(u),[j,C]=c.useState(!0),h=c.useRef(g),v=c.useRef(h.current);c.useEffect(()=>{const f=setTimeout(()=>{s&&o.current&&o.current.select()},0);return()=>clearTimeout(f)},[s]),c.useEffect(()=>{const f=setTimeout(()=>{if(s&&n.current){const p=Ae(h.current),D=ue(i,M=>M.label===h.current||M.label===p);if(D!==-1&&n.current){const M=n.current.children[D];M&&M.scrollIntoView({block:"center"})}}},0);return()=>clearTimeout(f)},[s,h,i]);const w=f=>{const p=W(f);C(p),v.current=f,p&&(h.current=q(f))},N=()=>{if(W(v.current)){const p=q(v.current);h.current=p,v.current=p;const D=O(p);P(D,t)}else{v.current=h.current;const p=O(h.current);P(p,t)}C(!0),o.current&&(o.current.value=h.current)};return e.jsx(B,{trigger:e.jsx(R,{showError:!j||!!t.scheduleErrors,children:e.jsx("div",{className:"flex w-full items-center",children:e.jsx("textarea",{className:"m-0 w-full resize-none border-none bg-transparent p-0 text-sm",defaultValue:h.current,ref:o,rows:1,wrap:"off",onBlur:()=>{N()},onChange:f=>{const p=f.target.value;w(p)},onKeyDown:f=>{f.key===" "&&f.stopPropagation()}})})}),open:s,onOpenChange:f=>{r(f),f?l(!0):N()},onCloseAutoFocus:f=>{f.preventDefault(),o.current&&o.current.select()},modal:!1,children:e.jsx("ul",{ref:n,children:i.map((f,p)=>e.jsx("li",{onClick:()=>{const D=ne(f.value.hour,f.value.minute);w(D),N(),r(!1),o.current&&o.current.select()},onMouseOver:()=>l(!1),onMouseOut:()=>l(!1),children:e.jsx(de,{$spoofHovered:a&&q(v.current)===f.label,children:f.label})},p))})})}function ze(){return Array.from({length:96},(s,r)=>{const a=Math.floor(r/4),l=r%4*15;return{label:ne(a,l),value:{hour:a,minute:l}}})}function P(t,s){if(t)switch(s.scheduleComponents.frequency){case"once":{Ne(t,s);break}case"daily":case"weekly":case"monthly":case"yearly":{s.setTime(t.getHours(),t.getMinutes());break}}}function F(){const t=b(),{scheduleComponents:s,scheduleErrors:r,setFrequency:a}=c.useContext(y),l=c.useMemo(()=>[{label:t.formatMessage(m.scheduleFrequencyOnce),value:"once"},{label:t.formatMessage(m.scheduleFrequencyDaily),value:"daily"},{label:t.formatMessage(m.scheduleFrequencyWeekly),value:"weekly"},{label:t.formatMessage(m.scheduleFrequencyMonthly),value:"monthly"},{label:t.formatMessage(m.scheduleFrequencyYearly),value:"yearly"},{label:t.formatMessage(m.scheduleFrequencyCustom),value:"custom"}],[t]),o=l.find(n=>n.value===s.frequency);return c.useEffect(()=>{o||a(l[0].value)},[o,l,a]),e.jsx(H,{options:l,initialOption:o,onClick:n=>a(n.value),showError:!!r})}function qe(){const t=b(),{scheduleComponents:s,scheduleErrors:r,setByDay:a}=c.useContext(y),l=Array.from({length:7},(d,u)=>new Intl.DateTimeFormat(t.locale,{weekday:"long"}).format(new Date(Date.UTC(2021,5,u+1)))),o=["MO","TU","WE","TH","FR","SA","SU"],n=l.map((d,u)=>({label:d,value:o[u]})),i=n.find(d=>d.value===s.by_day);return c.useEffect(()=>{i||a(n[0].value)},[i,n,a]),e.jsx(H,{options:n,initialOption:i,onClick:d=>a(d.value),showError:!!r})}function se({useShortForm:t=!1}){const{scheduleComponents:s,scheduleErrors:r,setByMonthDay:a}=c.useContext(y),l=Array.from({length:31},(d,u)=>({label:(u+1).toString(),value:u+1})),o=(d,u=new Date().getFullYear())=>new Date(u,d,0).getDate(),n=l.slice(0,o(s.by_month??1)),i=n.find(d=>d.value===s.by_month_day);return c.useEffect(()=>{i||a(n[0].value)},[i,n,a]),e.jsx(B,{rootClassName:t?"flex-none":void 0,trigger:e.jsx(R,{className:t?"w-[75px]":void 0,showError:!!r,children:i?.label}),children:e.jsx(ee,{options:n,onClick:d=>a(d.value)})})}function Pe(){const t=b(),{scheduleComponents:s,scheduleErrors:r,setByMonth:a}=c.useContext(y),l=new Intl.DateTimeFormat(t.locale,{month:"long"}),o=Array.from({length:12},(i,d)=>({label:l.format(new Date(0,d)),value:d+1})),n=o.find(i=>i.value===s.by_month);return c.useEffect(()=>{n||a(o[0].value)},[n,o,a]),e.jsx(H,{options:o,initialOption:n,onClick:i=>a(i.value),showError:!!r})}function Le(){const t=b(),{scheduleComponents:s,scheduleErrors:r,setStartDate:a}=c.useContext(y),[l,o]=c.useState(!1);c.useEffect(()=>{s.start_time||a(new Date)},[s.start_time,a]);const n=s.start_time?new Date(s.start_time):new Date,i=new Intl.DateTimeFormat(t.locale,{year:"numeric",month:"long",day:"numeric"});return e.jsx(B,{trigger:e.jsx(R,{showError:!!r,children:i.format(n)}),contentClassName:"min-w-[224px]",open:l,onOpenChange:o,children:e.jsx(ke,{initialDate:n,onClick:()=>o(!1)})})}function He(){return e.jsxs("div",{className:"flex gap-2",children:[e.jsx(F,{}),e.jsx(Le,{}),e.jsx(_,{})]})}function Ye(){return e.jsxs("div",{className:"flex gap-2",children:[e.jsx(F,{}),e.jsx(_,{})]})}function Ve(){return e.jsxs("div",{className:"flex gap-2",children:[e.jsx(F,{}),e.jsx(qe,{}),e.jsx(_,{})]})}function We(){return e.jsxs("div",{className:"flex gap-2",children:[e.jsx(F,{}),e.jsx(se,{}),e.jsx(_,{})]})}function $e(){return e.jsxs("div",{className:"flex gap-2",children:[e.jsx(F,{}),e.jsx(Pe,{}),e.jsx(se,{useShortForm:!0}),e.jsx(_,{})]})}function Ue({automationId:t,conversationId:s,onModalClose:r}){return e.jsxs("div",{className:"flex flex-col gap-3",children:[e.jsx(F,{}),e.jsx(Ze,{automationId:t}),e.jsx(Ge,{conversationId:s,onModalClose:r})]})}function Ze({automationId:t}){const{data:s,fetchNextPage:r,hasNextPage:a,isFetchingNextPage:l}=oe({queryKey:["automation-next-run-times",t],queryFn:({pageParam:n})=>K.getAutomationNextRunTimes(t,n),getNextPageParam:n=>n.has_more?n.next_run_times[n.next_run_times.length-1]:void 0,initialPageParam:null}),o=c.useRef(null);return c.useEffect(()=>{o.current&&(o.current.scrollTop=o.current.scrollHeight)},[s]),e.jsx("div",{className:"rounded-lg bg-token-main-surface-secondary p-3",children:e.jsxs("div",{ref:o,className:"flex h-full max-h-52 flex-col gap-3 overflow-y-auto text-sm",children:[s?.pages?.flatMap(n=>n.next_run_times).map((n,i)=>e.jsx("div",{children:e.jsx(De,{targetTimeUTC:n})},i)),a&&e.jsx("button",{onClick:()=>r(),disabled:l,children:e.jsxs("div",{className:"flex items-center gap-1 text-sm font-medium",children:[e.jsx(x,{id:"qL17GV",defaultMessage:"See more"}),e.jsx(G,{className:"icon-md"})]})})]})})}function Ge({conversationId:t,onModalClose:s}){const r=$();return t?e.jsxs("div",{className:"flex gap-3 rounded-lg border border-token-border-medium p-4",children:[e.jsx(ge,{}),e.jsxs("div",{className:"flex flex-grow flex-col",children:[e.jsx("span",{className:"text-sm font-medium",children:e.jsx(x,{...m.scheduleCustomScheduleTitle})}),e.jsx("span",{className:"text-sm text-token-text-secondary",children:e.jsx(x,{...m.scheduleCustomScheduleContent})})]}),e.jsx(T,{onClick:()=>{s(),r(X(t))},children:e.jsx(x,{...m.scheduleCustomScheduleOpenChat})})]}):null}function Ke({automationId:t,conversationId:s,onModalClose:r}){const{scheduleComponents:a}=c.useContext(y);switch(a.frequency){case"once":return e.jsx(He,{});case"daily":return e.jsx(Ye,{});case"weekly":return e.jsx(Ve,{});case"monthly":return e.jsx(We,{});case"yearly":return e.jsx($e,{});case"custom":return e.jsx(Ue,{automationId:t,conversationId:s,onModalClose:r})}}function Xe({onClose:t,onConfirm:s}){const r=b();return e.jsx(Z,{isOpen:!0,title:r.formatMessage(m.editModalCancel),primaryButtonColor:"danger",onClose:()=>{t()},onConfirm:()=>{s()},children:e.jsx("div",{className:"text-sm",children:e.jsx(x,{...m.cancelModalDescription})})})}function Qe({onClick:t}){return e.jsxs("div",{className:"flex items-center justify-between rounded-2xl border border-token-border-medium p-4",children:[e.jsxs("div",{className:"flex items-center gap-3 text-sm font-medium",children:[e.jsx(ve,{className:"icon-lg"}),e.jsx(x,{...m.pauseBanner})]}),e.jsx("div",{children:e.jsx(T,{onClick:t,children:e.jsx(x,{...L.messages.resume})})})]})}function at({item:t,source:s,onClose:r}){const a=b(),l=U();c.useEffect(()=>{we.count(je.JAWBONE,"jawbone_edit_modal.open")},[]);const{scheduleComponents:o,scheduleErrors:n}=c.useContext(y),[i,d]=c.useState(!1),[u,g]=c.useState(!1),[j,C]=c.useState(t.title),[h,v]=c.useState(t.prompt),[w,N]=c.useState(t.is_enabled);c.useEffect(()=>{if(n?.tooFarInFuture||n?.inPast){d(!1);return}d(j!==t.title&&j.length>0||h!==t.prompt&&h.length>0||w!==t.is_enabled||!me(o,t.schedule_components))},[n?.tooFarInFuture,n?.inPast,j,h,w,t,o]);const{mutate:f}=re({mutationFn:()=>K.saveAutomation(t.id,j,t.schedule,w,h,t.schedule_components.start_time!==o.start_time?Intl.DateTimeFormat().resolvedOptions().timeZone:t.default_timezone,o,t.last_run_time),onSuccess:S=>{S&&pe.setAutomation(S.id,S),r(a.formatMessage(m.editModalSaveSuccess))},onError:()=>{l.danger(a.formatMessage(m.editModalSaveFailure),{hasCloseButton:!0}),d(!0),g(!1)}}),[p,D]=c.useState(!1),[M,z]=c.useState(!1);fe("156153730");const ae=$();return e.jsxs(e.Fragment,{children:[e.jsx(he,{className:"min-w-[680px] text-sm",isOpen:!0,onClose:()=>{if(i){z(!0);return}r()},showCloseButton:!0,title:e.jsx(x,{...m.editModalTitle}),headerAccessory:s==="tasks"&&e.jsx(T,{icon:ye,color:"secondary",onClick:()=>{ae(X(t.conversation_id))},children:e.jsx(x,{id:"KkyshF",defaultMessage:"View chat"})}),type:"success",children:e.jsxs("div",{className:"flex flex-col gap-6",children:[!w&&e.jsx(Qe,{onClick:()=>{N(!0)}}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("div",{className:"text-sm font-medium",children:e.jsx(x,{...m.editModalName})}),e.jsx("textarea",{className:I("w-full resize-none rounded-lg border-token-border-medium bg-token-main-surface-primary text-sm",j.length===0&&"border-token-text-error focus:border-token-text-error"),rows:1,value:j,onChange:S=>C(S.target.value),placeholder:a.formatMessage({id:"GB3SVK",defaultMessage:"Summarize AI news"})}),j.length===0&&e.jsx(J,{children:e.jsx(x,{...m.editModalMissingTaskName})})]}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("div",{className:"text-sm font-medium",children:e.jsx(x,{...m.editModalInstructions})}),e.jsx("textarea",{className:I("w-full resize-none rounded-lg border-token-border-medium bg-token-main-surface-primary text-sm",h.length===0&&"border-token-text-error focus:border-token-text-error"),rows:3,value:h,onChange:S=>v(S.target.value),placeholder:a.formatMessage({id:"XDXPIp",defaultMessage:"Send a summary of the latest news in AI, focusing on especially surprising stories."})}),h.length===0&&e.jsx(J,{children:e.jsx(x,{...m.editModalMissingInstructions})})]}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("div",{className:"text-sm font-medium",children:e.jsx(x,{...m.editModalSchedule})}),e.jsx("div",{children:e.jsx(Ke,{automationId:t.id,conversationId:t.conversation_id,onModalClose:r})}),e.jsxs("div",{children:[n?.tooFarInFuture&&e.jsx(J,{children:e.jsx(x,{...m.editModalTooFarInFuture})}),n?.inPast&&e.jsx(J,{children:e.jsx(x,{...m.editModalInPast})})]}),!1]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsxs("div",{className:"flex gap-2",children:[w&&e.jsx(T,{color:"secondary",onClick:()=>{N(!1)},children:e.jsx(x,{...L.messages.pause})}),e.jsx(T,{color:"secondary",onClick:()=>{D(!0)},children:e.jsx(x,{...m.editModalDelete})})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(T,{color:"secondary",onClick:()=>{if(i){z(!0);return}r()},children:e.jsx(x,{...m.editModalCancel})}),e.jsx(T,{disabled:!i,loading:u,color:"primary",onClick:()=>{g(!0),f()},children:e.jsx(x,{...m.editModalSave})})]})]})]})}),M&&e.jsx(Xe,{onClose:()=>z(!1),onConfirm:()=>r()}),p&&e.jsx(Me,{item:t,onClose:()=>D(!1),onConfirm:()=>{D(!1),r()}})]})}function J({children:t}){return e.jsx("div",{className:"text-sm font-medium text-token-text-error",children:t})}export{st as J,ve as S,at as a,De as b,L as c,Me as d};
//# sourceMappingURL=elgrylk95u65jz3s.js.map
