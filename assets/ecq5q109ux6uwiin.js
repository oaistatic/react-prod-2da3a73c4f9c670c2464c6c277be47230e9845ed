import{c as S,r as T,j as s,M as c}from"./izh0i1dfnf8ev7x1.js";import{fA as $,e3 as Y,d as x,h as I}from"./hggowi1ggrzb09yc.js";import{Y as E,Z as A,_ as M,$ as F,a0 as _}from"./fc2hzad6rtrm7s5f.js";import{H as D}from"./kh1pguo5uwldp8r4.js";const u=I({historyBucketToday:{id:"history.bucket.today",defaultMessage:"Today"},historyBucketYesterday:{id:"history.bucket.yesterday",defaultMessage:"Yesterday"},historyBucketLastSeven:{id:"history.bucket.lastSeven",defaultMessage:"Previous 7 Days"},historyBucketLastThirty:{id:"history.bucket.lastThirty",defaultMessage:"Previous 30 Days"}}),L=5;function R(h,y){const i=S();return T.useMemo(()=>h.reduce((e,t)=>{const r=new Date(t.update_time??t.create_time??0),d=E(new Date,r);if(d===0)e.recent.today.items.push(t);else if(d<=1)e.recent.yesterday.items.push(t);else if(d<=7)e.recent.lastSeven.items.push(t);else if(d<=30)e.recent.lastThirty.items.push(t);else if(A(r)){const a=M(r),n=F(r),l=`${a}-${n}`;e.dynamicMonths[l]?e.dynamicMonths[l].items.push(t):e.dynamicMonths[l]={label:i.formatDate(r,{month:"long"}),items:[t]}}else{const n=`${M(r)}-`;e.dynamicYears[n]?e.dynamicYears[n].items.push(t):e.dynamicYears[n]={label:i.formatDate(r,{year:"numeric"}),items:[t]}}return e},{recent:{today:{label:s.jsx(c,{...u.historyBucketToday}),items:[]},yesterday:{label:s.jsx(c,{...u.historyBucketYesterday}),items:[]},lastSeven:{label:s.jsx(c,{...u.historyBucketLastSeven}),items:[]},lastThirty:{label:s.jsx(c,{...u.historyBucketLastThirty}),items:[]}},dynamicMonths:{},dynamicYears:{}}),[y,h])}function C({activeId:h,bucketedItems:y,items:i,hasNextPage:e,infiniteScrollTriggerElementRef:t,hideOverflowMenu:r}){const d=$().activeServerThreadIds,a=Y();return s.jsx(s.Fragment,{children:[y.recent,y.dynamicMonths,y.dynamicYears].flatMap((n,l)=>s.jsx(T.Fragment,{children:Object.entries(n).map(([f,{items:m,label:g}],b)=>{if(f!=="today"&&!m.length)return null;const j=!!m.find(o=>i.length>0&&o.id===i[0]?.id);return m.length>0&&s.jsxs("div",{className:x(a&&"first:mt-1",!a&&"relative mt-5 first:mt-0 last:mb-5"),children:[s.jsx("div",{className:x("sticky",!a&&"bg-token-sidebar-surface-primary",a?"top-[--sidebar-sticky-threshold] z-20":"top-0 z-20"),children:s.jsx("span",{className:"flex h-9 items-center",children:s.jsx(_,{$screenArch:a,children:g})})}),s.jsx("ol",{className:a?"flex flex-col gap-0.5":void 0,children:m.map((o,p)=>{const B=h===o.id,v=d.has(o.id),k=j&&p===0,N=e&&i[i.length-L-1]?.id===o.id?t:void 0;return v&&a?null:s.jsx(D,{item:o,hideOverflowMenu:r,isActiveInMainWindow:B,isActive:v,isFirstItem:k,elementRef:N,testId:`history-item-${p}`},`history-item-${o.id}-${f}`)})})]},`${f}-${l}-${b}`)})},`category-${l}`))})}export{C as H,R as u};
//# sourceMappingURL=ecq5q109ux6uwiin.js.map
