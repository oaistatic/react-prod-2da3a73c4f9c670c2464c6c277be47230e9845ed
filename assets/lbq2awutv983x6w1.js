const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/eteitijuiqtbcno3.js","assets/izh0i1dfnf8ev7x1.js","assets/hggowi1ggrzb09yc.js","assets/root-ko7rpr3h.css","assets/fc2hzad6rtrm7s5f.js","assets/conversation-small-lgvqkxxm.css","assets/joa8jajuiu4xqpzn.js"])))=>i.map(i=>d[i]);
import{cG as Ee,aY as De,bb as Ie,b1 as R,a$ as O,cK as Pe,b0 as F,bf as Me,br as oe,H as ke,d as $,b$ as Re,E as se,bY as _e,co as Te,cc as Ne,S as Ae,P as Ve,a as Oe,cp as Be,bv as Ke,bw as Fe,ew as Le,cv as B,cw as Z,M as He,b_ as ze,ce as Ue,D as We}from"./hggowi1ggrzb09yc.js";import{r as u,j as t,c as L,av as re,M as V,a as Ge}from"./izh0i1dfnf8ev7x1.js";import{F as Ye}from"./mzjm79wsdf3xrvs9.js";import{iM as Xe,iN as ae,iO as ie,ix as $e,dK as qe,iu as ce,bE as le,cp as K,dm as Qe,Q as Je,q as Ze,r as ee,bI as et,f4 as tt,iP as nt,bJ as ot,hv as st,iQ as rt,iR as at,cq as de}from"./fc2hzad6rtrm7s5f.js";import{I as it,f as ct}from"./f3mk3eu1wcl6fjlu.js";import{U as lt,R as dt,P as ut}from"./ktras8z3bowlgaf3.js";import"./c0dr65ykcqmn5jn4.js";import"./lb1py1igp6jzrtce.js";import"./8nxoaz0vb9p890un.js";import"./et4ywzsmc47u3i7v.js";import"./hjbk0a4n40hheieo.js";import"./in3ze5ugryldzaj2.js";import"./ab6tyx2xygyb56l3.js";import"./ddzilicy6qtleo90.js";import"./m7r17aksjqnnuufi.js";import"./ojcgwgwujkn9jneg.js";import"./j7xrr4x8o3ssozmz.js";import"./kh1pguo5uwldp8r4.js";import"./paq1bye12yp7s2hg.js";import"./modzmagtrlhmunl0.js";import"./ecq5q109ux6uwiin.js";import"./ntdjjw6s1dl31tgb.js";import"./jr1b41w4nuv00isi.js";import"./h28ootcilxet47c8.js";import"./bluopupp3hty4d7q.js";import"./ca7lq2gyndiywe6g.js";import"./c9avu4yfkjav9bdb.js";import"./nf7qs4jioxsy0qcq.js";import"./myyiiqb6up4h3fac.js";import"./nb7ikr25bnd89k3f.js";import"./ei7ej0cmjdt2qsbq.js";function mt(){const[e,n]=u.useState({undoStack:[],currentIndex:-1});function o(r){n(c=>({undoStack:[...c.undoStack.slice(0,c.currentIndex+1),r],currentIndex:c.currentIndex+1}))}function s(){n(r=>({undoStack:r.undoStack,currentIndex:Math.max(r.currentIndex-1,-1)}))}function i(){n(r=>({undoStack:r.undoStack,currentIndex:Math.min(r.currentIndex+1,r.undoStack.length-1)}))}function a(){n({undoStack:[],currentIndex:-1})}return{currentDrawnShape:e.undoStack.length>0?e.undoStack[e.currentIndex]:null,onNewDrawnShape:o,canUndoDrawing:e.currentIndex>=0,undoDrawing:s,canRedoDrawing:e.currentIndex<e.undoStack.length-1,redoDrawing:i,clearAllDrawings:a}}var ue=["PageUp","PageDown"],me=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],fe={"from-left":["Home","PageDown","ArrowDown","ArrowLeft"],"from-right":["Home","PageDown","ArrowDown","ArrowRight"],"from-bottom":["Home","PageDown","ArrowDown","ArrowLeft"],"from-top":["Home","PageDown","ArrowUp","ArrowLeft"]},_="Slider",[G,ft,gt]=Ee(_),[ge,wn]=De(_,[gt]),[pt,H]=ge(_),pe=u.forwardRef((e,n)=>{const{name:o,min:s=0,max:i=100,step:a=1,orientation:r="horizontal",disabled:c=!1,minStepsBetweenThumbs:d=0,defaultValue:m=[s],value:f,onValueChange:l=()=>{},onValueCommit:g=()=>{},inverted:p=!1,form:y,...x}=e,S=u.useRef(new Set),h=u.useRef(0),v=r==="horizontal"?ht:xt,[w=[],b]=Ie({prop:f,defaultProp:m,onChange:C=>{[...S.current][h.current]?.focus(),l(C)}}),I=u.useRef(w);function T(C){const P=yt(w,C);N(C,P)}function z(C){N(C,h.current)}function je(){const C=I.current[h.current];w[h.current]!==C&&g(w)}function N(C,P,{commit:U}={commit:!1}){const Q=Dt(a),W=It(Math.round((C-s)/a)*a+s,Q),A=ae(W,[s,i]);b((k=[])=>{const M=wt(k,A,P);if(Et(M,d*a)){h.current=M.indexOf(A);const J=String(M)!==String(k);return J&&U&&g(M),J?M:k}else return k})}return t.jsx(pt,{scope:e.__scopeSlider,name:o,disabled:c,min:s,max:i,valueIndexToChangeRef:h,thumbs:S.current,values:w,orientation:r,form:y,children:t.jsx(G.Provider,{scope:e.__scopeSlider,children:t.jsx(G.Slot,{scope:e.__scopeSlider,children:t.jsx(v,{"aria-disabled":c,"data-disabled":c?"":void 0,...x,ref:n,onPointerDown:R(x.onPointerDown,()=>{c||(I.current=w)}),min:s,max:i,inverted:p,onSlideStart:c?void 0:T,onSlideMove:c?void 0:z,onSlideEnd:c?void 0:je,onHomeKeyDown:()=>!c&&N(s,0,{commit:!0}),onEndKeyDown:()=>!c&&N(i,w.length-1,{commit:!0}),onStepKeyDown:({event:C,direction:P})=>{if(!c){const W=ue.includes(C.key)||C.shiftKey&&me.includes(C.key)?10:1,A=h.current,k=w[A],M=a*W*P;N(k+M,A,{commit:!0})}}})})})})});pe.displayName=_;var[he,xe]=ge(_,{startEdge:"left",endEdge:"right",size:"width",direction:1}),ht=u.forwardRef((e,n)=>{const{min:o,max:s,dir:i,inverted:a,onSlideStart:r,onSlideMove:c,onSlideEnd:d,onStepKeyDown:m,...f}=e,[l,g]=u.useState(null),p=O(n,v=>g(v)),y=u.useRef(),x=Pe(i),S=x==="ltr",h=S&&!a||!S&&a;function E(v){const w=y.current||l.getBoundingClientRect(),b=[0,w.width],T=q(b,h?[o,s]:[s,o]);return y.current=w,T(v-w.left)}return t.jsx(he,{scope:e.__scopeSlider,startEdge:h?"left":"right",endEdge:h?"right":"left",direction:h?1:-1,size:"width",children:t.jsx(Se,{dir:x,"data-orientation":"horizontal",...f,ref:p,style:{...f.style,"--radix-slider-thumb-transform":"translateX(-50%)"},onSlideStart:v=>{const w=E(v.clientX);r?.(w)},onSlideMove:v=>{const w=E(v.clientX);c?.(w)},onSlideEnd:()=>{y.current=void 0,d?.()},onStepKeyDown:v=>{const b=fe[h?"from-left":"from-right"].includes(v.key);m?.({event:v,direction:b?-1:1})}})})}),xt=u.forwardRef((e,n)=>{const{min:o,max:s,inverted:i,onSlideStart:a,onSlideMove:r,onSlideEnd:c,onStepKeyDown:d,...m}=e,f=u.useRef(null),l=O(n,f),g=u.useRef(),p=!i;function y(x){const S=g.current||f.current.getBoundingClientRect(),h=[0,S.height],v=q(h,p?[s,o]:[o,s]);return g.current=S,v(x-S.top)}return t.jsx(he,{scope:e.__scopeSlider,startEdge:p?"bottom":"top",endEdge:p?"top":"bottom",size:"height",direction:p?1:-1,children:t.jsx(Se,{"data-orientation":"vertical",...m,ref:l,style:{...m.style,"--radix-slider-thumb-transform":"translateY(50%)"},onSlideStart:x=>{const S=y(x.clientY);a?.(S)},onSlideMove:x=>{const S=y(x.clientY);r?.(S)},onSlideEnd:()=>{g.current=void 0,c?.()},onStepKeyDown:x=>{const h=fe[p?"from-bottom":"from-top"].includes(x.key);d?.({event:x,direction:h?-1:1})}})})}),Se=u.forwardRef((e,n)=>{const{__scopeSlider:o,onSlideStart:s,onSlideMove:i,onSlideEnd:a,onHomeKeyDown:r,onEndKeyDown:c,onStepKeyDown:d,...m}=e,f=H(_,o);return t.jsx(F.span,{...m,ref:n,onKeyDown:R(e.onKeyDown,l=>{l.key==="Home"?(r(l),l.preventDefault()):l.key==="End"?(c(l),l.preventDefault()):ue.concat(me).includes(l.key)&&(d(l),l.preventDefault())}),onPointerDown:R(e.onPointerDown,l=>{const g=l.target;g.setPointerCapture(l.pointerId),l.preventDefault(),f.thumbs.has(g)?g.focus():s(l)}),onPointerMove:R(e.onPointerMove,l=>{l.target.hasPointerCapture(l.pointerId)&&i(l)}),onPointerUp:R(e.onPointerUp,l=>{const g=l.target;g.hasPointerCapture(l.pointerId)&&(g.releasePointerCapture(l.pointerId),a(l))})})}),ve="SliderTrack",we=u.forwardRef((e,n)=>{const{__scopeSlider:o,...s}=e,i=H(ve,o);return t.jsx(F.span,{"data-disabled":i.disabled?"":void 0,"data-orientation":i.orientation,...s,ref:n})});we.displayName=ve;var Y="SliderRange",be=u.forwardRef((e,n)=>{const{__scopeSlider:o,...s}=e,i=H(Y,o),a=xe(Y,o),r=u.useRef(null),c=O(n,r),d=i.values.length,m=i.values.map(g=>Ce(g,i.min,i.max)),f=d>1?Math.min(...m):0,l=100-Math.max(...m);return t.jsx(F.span,{"data-orientation":i.orientation,"data-disabled":i.disabled?"":void 0,...s,ref:c,style:{...e.style,[a.startEdge]:f+"%",[a.endEdge]:l+"%"}})});be.displayName=Y;var X="SliderThumb",ye=u.forwardRef((e,n)=>{const o=ft(e.__scopeSlider),[s,i]=u.useState(null),a=O(n,c=>i(c)),r=u.useMemo(()=>s?o().findIndex(c=>c.ref.current===s):-1,[o,s]);return t.jsx(St,{...e,ref:a,index:r})}),St=u.forwardRef((e,n)=>{const{__scopeSlider:o,index:s,name:i,...a}=e,r=H(X,o),c=xe(X,o),[d,m]=u.useState(null),f=O(n,E=>m(E)),l=d?r.form||!!d.closest("form"):!0,g=Me(d),p=r.values[s],y=p===void 0?0:Ce(p,r.min,r.max),x=bt(s,r.values.length),S=g?.[c.size],h=S?Ct(S,y,c.direction):0;return u.useEffect(()=>{if(d)return r.thumbs.add(d),()=>{r.thumbs.delete(d)}},[d,r.thumbs]),t.jsxs("span",{style:{transform:"var(--radix-slider-thumb-transform)",position:"absolute",[c.startEdge]:`calc(${y}% + ${h}px)`},children:[t.jsx(G.ItemSlot,{scope:e.__scopeSlider,children:t.jsx(F.span,{role:"slider","aria-label":e["aria-label"]||x,"aria-valuemin":r.min,"aria-valuenow":p,"aria-valuemax":r.max,"aria-orientation":r.orientation,"data-orientation":r.orientation,"data-disabled":r.disabled?"":void 0,tabIndex:r.disabled?void 0:0,...a,ref:f,style:p===void 0?{display:"none"}:e.style,onFocus:R(e.onFocus,()=>{r.valueIndexToChangeRef.current=s})})}),l&&t.jsx(vt,{name:i??(r.name?r.name+(r.values.length>1?"[]":""):void 0),form:r.form,value:p},s)]})});ye.displayName=X;var vt=e=>{const{value:n,...o}=e,s=u.useRef(null),i=Xe(n);return u.useEffect(()=>{const a=s.current,r=window.HTMLInputElement.prototype,d=Object.getOwnPropertyDescriptor(r,"value").set;if(i!==n&&d){const m=new Event("input",{bubbles:!0});d.call(a,n),a.dispatchEvent(m)}},[i,n]),t.jsx("input",{style:{display:"none"},...o,ref:s,defaultValue:n})};function wt(e=[],n,o){const s=[...e];return s[o]=n,s.sort((i,a)=>i-a)}function Ce(e,n,o){const a=100/(o-n)*(e-n);return ae(a,[0,100])}function bt(e,n){return n>2?`Value ${e+1} of ${n}`:n===2?["Minimum","Maximum"][e]:void 0}function yt(e,n){if(e.length===1)return 0;const o=e.map(i=>Math.abs(i-n)),s=Math.min(...o);return o.indexOf(s)}function Ct(e,n,o){const s=e/2,a=q([0,50],[0,s]);return(s-a(n)*o)*o}function jt(e){return e.slice(0,-1).map((n,o)=>e[o+1]-n)}function Et(e,n){if(n>0){const o=jt(e);return Math.min(...o)>=n}return!0}function q(e,n){return o=>{if(e[0]===e[1]||n[0]===n[1])return n[0];const s=(n[1]-n[0])/(e[1]-e[0]);return n[0]+s*(o-e[0])}}function Dt(e){return(String(e).split(".")[1]||"").length}function It(e,n){const o=Math.pow(10,n);return Math.round(e*o)/o}var Pt=pe,Mt=we,kt=be,Rt=ye,j=(e=>(e[e.Default=0]="Default",e[e.Inpaint=1]="Inpaint",e))(j||{});function _t({imageAsset:e,mode:n,setMode:o,clientThreadId:s,messageId:i,cursorWidth:a,setCursorWidth:r,inpaintingDrawingState:c,isLoadingNewImage:d}){const m=ke(s),{canUndoDrawing:f,undoDrawing:l,canRedoDrawing:g,redoDrawing:p,clearAllDrawings:y}=c,x=L();return t.jsxs(re.div,{className:"flex h-16 w-full justify-between px-4",...ie,children:[t.jsx("div",{className:"flex items-center",children:n===j.Inpaint&&t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:$("flex items-center gap-3",d&&"opacity-50"),children:[t.jsx(ne,{className:"h-[11px] w-[11px]"}),t.jsxs(Pt,{className:"relative flex w-[90px] items-center",min:32,max:240,step:.01,value:[a],onValueChange:S=>r(S[0]),disabled:d,children:[t.jsx(Mt,{className:"relative h-[2px] grow bg-token-text-quaternary",children:t.jsx(kt,{className:"absolute h-full bg-token-text-secondary"})}),t.jsx(Rt,{className:"block h-[11px] w-[11px] rounded-full bg-token-text-secondary"})]}),t.jsx(ne,{className:"h-6 w-6"})]}),t.jsx(te,{}),t.jsx(D,{disabled:!f||d,onClick:l,children:t.jsx(lt,{})}),t.jsx(D,{disabled:!g||d,onClick:p,children:t.jsx(dt,{})}),t.jsx(te,{}),t.jsx(D,{disabled:!f||d,onClick:y,children:t.jsx(V,{id:"imageEditorControls.clearSelectionButtonLabel",defaultMessage:"Clear selection"})})]})}),t.jsx("div",{className:"flex items-center",children:n===j.Inpaint?t.jsx(D,{onClick:()=>o(j.Default),disabled:d,children:t.jsx(V,{id:"imageEditorControls.cancelButtonLabel",defaultMessage:"Cancel"})}):t.jsxs(t.Fragment,{children:[t.jsx(Nt,{imageAsset:e,setMode:o,messageId:i,serverThreadId:m}),t.jsx(D,{tooltip:x.formatMessage({id:"imageEditorControls.downloadButtonTooltip",defaultMessage:"Save"}),onClick:()=>$e(e,m,i),children:t.jsx(qe,{})}),t.jsx(Tt,{prompt:ce(e),children:t.jsx(D,{tooltip:x.formatMessage({id:"imageEditorControls.promptButtonTooltip",defaultMessage:"Prompt"}),children:t.jsx(le,{})})}),t.jsx(D,{tooltip:x.formatMessage({id:"imageEditorControls.closeButtonTooltip",defaultMessage:"Close"}),onClick:K.close,children:t.jsx(Re,{className:"icon-lg"})})]})})]})}function Tt({prompt:e,children:n}){const[o,s]=u.useState(!1),i=L(),a=se();return t.jsx(Qe,{sideOffset:4,alignAgainstAnchor:"end",triggerButton:t.jsx("div",{className:"group",children:n}),className:"z-10",size:"none",children:t.jsxs("div",{className:"flex max-w-sm flex-col gap-3 p-4",children:[t.jsx("div",{className:"text-token-text-secondary",children:t.jsx(V,{id:"imageEditorControls.promptPopoverLabel",defaultMessage:"Prompt"})}),t.jsx("div",{children:e}),t.jsx("div",{children:t.jsx(_e,{color:"secondary",disabled:o,onClick:r=>{s(!0),Je(e,a,r),setTimeout(()=>s(!1),2e3)},icon:Te,children:o?i.formatMessage({id:"imageEditorControls.copiedButtonLabel",defaultMessage:"Copied!"}):i.formatMessage({id:"imageEditorControls.copyButtonLabel",defaultMessage:"Copy"})})})]})})}function D({children:e,tooltip:n,disabled:o,onClick:s}){const i=t.jsx("button",{className:$("rounded p-2 font-semibold hover:bg-token-main-surface-tertiary group-radix-state-open:bg-token-main-surface-tertiary",o?"text-token-text-quaternary":"text-token-text-secondary"),disabled:o,onClick:s,children:e});return n!=null?t.jsx(Ne,{label:n,sideOffset:4,children:i}):i}function Nt({imageAsset:e,setMode:n,messageId:o,serverThreadId:s,disabled:i}){const a=L(),r=Ze(ee.DalleEditingOnboarding),c=r.eligible&&!r.isLoading,d=t.jsx(D,{tooltip:c?void 0:a.formatMessage({id:"imageEditorControls.inpaintButtonTooltip",defaultMessage:"Select"}),onClick:()=>{n(j.Inpaint),Ae.logEvent("chatgpt_dalle_inpaint_click",null,{sourceOperation:e.metadata?.dalle?.edit_op??"none",hasParent:e.metadata?.dalle?.parent_gen_id!=null?"true":"false"}),Ve.logEvent(Oe.dalleImageClickInpaint,{conversationId:s,messageId:o,generationId:e.metadata?.dalle?.gen_id,fileId:et(e.asset_pointer),parentGenerationId:e.metadata?.dalle?.parent_gen_id,sourceOperation:e.metadata?.dalle?.edit_op})},disabled:i,children:t.jsx(ut,{})});return c?t.jsx(tt,{announcementKey:ee.DalleEditingOnboarding,show:!0,side:"bottom",sideOffset:0,title:a.formatMessage({id:"imageEditorNUX.title",defaultMessage:"Select area of the image to edit"}),description:a.formatMessage({id:"imageEditorNUX.description",defaultMessage:"Highlight the area and describe changes in chat."}),onDismiss:r.markAsViewed,children:t.jsx("div",{children:d})}):d}const te=oe.div`mx-3 w-[1px] h-6 bg-token-border-light`,ne=oe.div`rounded-full border-2 border-token-text-secondary`;function At({mode:e,imageIndex:n,allImages:o,onSwitchImage:s,isLoadingNewImage:i}){const a=n>0,r=u.useCallback(()=>{a&&s(o[n-1])},[a,o,n,s]),c=n<o.length-1,d=u.useCallback(()=>{c&&s(o[n+1])},[c,o,n,s]);return u.useEffect(()=>{function m(f){f.target instanceof HTMLTextAreaElement||e===j.Default&&(f.key==="ArrowLeft"?r():f.key==="ArrowRight"&&d())}return document.addEventListener("keydown",m),()=>{document.removeEventListener("keydown",m)}},[e,r,d]),t.jsx("div",{className:"flex h-16 w-full items-center justify-center gap-3 font-semibold text-token-text-secondary",children:e===j.Inpaint?!i&&t.jsxs("div",{className:"flex items-center gap-1.5",children:[t.jsx(V,{id:"imageEditor.selectArea",defaultMessage:"Select an area to edit"}),t.jsx("a",{href:"https://help.openai.com/en/articles/9055440",target:"_blank",rel:"noreferrer",children:t.jsx(le,{className:"icon-md"})})]}):o.length>1?t.jsxs(t.Fragment,{children:[t.jsx("button",{disabled:!a,className:"disabled:text-token-text-tertiary",onClick:r,children:t.jsx(nt,{className:"icon-lg"})}),t.jsx("div",{children:t.jsx(V,{id:"imageEditor.imageNumber",defaultMessage:"Image {num} of {numImages}",values:{num:n+1,numImages:o.length}})}),t.jsx("button",{disabled:!c,className:"disabled:text-token-text-tertiary",onClick:d,children:t.jsx(Be,{className:"icon-lg"})})]}):null})}const Vt=0,Ot=64;function Bt({imageAsset:e,children:n,containerDimensions:o,isLoadingNewImage:s}){return t.jsxs(re.div,{className:"absolute",style:Kt(e,o),...ie,children:[n,t.jsx("div",{className:$("absolute inset-0 flex items-center justify-center bg-token-main-surface-primary transition-opacity duration-1000",s?"pointer-events-auto opacity-60":"pointer-events-none opacity-0")})]})}function Kt(e,n){const{width:o,height:s}=e,{width:i,height:a}=n,r=i-2*Vt,c=a-2*Ot,d=o/s,m=r/c,f=d>m,l=f?r:c*d,g=f?r/d:c,p=(a-g)/2,y=(i-l)/2;return{top:p,left:y,width:l,height:g}}const Ft=Ke(()=>Fe(()=>import("./eteitijuiqtbcno3.js"),__vite__mapDeps([0,1,2,3,4,5,6])).then(e=>e.DynamicDrawingCanvas));function bn({clientThreadId:e,messageId:n,image:o,allImages:s}){const i=Le(e),a=i?.messages[i.messages.length-1],r=a!=null&&[B.Dalle,B.t2uay3k].includes(Z(a.message))&&!ot(a.message),c=Ge();return u.useEffect(()=>{async function d(m,f){try{const l=await ct(c,m);K.setFocusedObject({type:de.Image,image:l[0],allImages:l,messageId:f})}catch(l){We.addError(new Error("Failed to load newly created images:",{cause:l}))}}if(a!=null&&[B.Dalle,B.t2uay3k].includes(Z(a.message))&&a.message.content.content_type===He.MultimodalText){const m=ze.getImageAssetPointers(a.message);d(m,a.message.id)}},[c,a]),t.jsx(Lt,{image:o,allImages:s,isLoadingNewImage:r,clientThreadId:e,messageId:n})}function Lt({image:e,allImages:n,isLoadingNewImage:o,clientThreadId:s,messageId:i}){const[a,r]=u.useState(j.Default),[c,d]=u.useState({width:window.innerWidth-Ye,height:window.innerHeight}),m=u.useRef(null),[f,l]=u.useState(136),g=mt(),{currentDrawnShape:p,onNewDrawnShape:y,clearAllDrawings:x}=g,S=u.useRef(null),h=L(),E=se(),{setTargetedContent:v}=st();u.useEffect(()=>{const b=new ResizeObserver(I=>{const{width:T,height:z}=I[0].contentRect;d({width:T,height:z})});return m.current&&b.observe(m.current),()=>{b.disconnect()}},[]),u.useEffect(()=>{function b(I){I.key==="Escape"&&(a===j.Inpaint?r(j.Default):K.close())}return document.addEventListener("keydown",b),()=>{document.removeEventListener("keydown",b)}},[a]),u.useEffect(()=>(p==null?v({type:"object",placeholderTextOverride:Ue({id:"imageEditor.transformationTextareaPlaceholder",defaultMessage:"Edit imageâ€¦"}),shouldPersistAcrossMessages:!0,isFocusedViewContent:!0,createNewCompletionParams:b=>rt(b,e)}):v({type:"object",label:h.formatMessage({id:"imageEditor.inpaintingTargetedContentLabel",defaultMessage:"Edit selection"}),isFocusedViewContent:!0,createNewCompletionParams:async b=>await at(b,e,S.current?.getImageData(),h,E),onCleared:()=>r(j.Default)}),()=>{v(void 0)}),[e,h,v,p,E]),u.useEffect(()=>{a!==j.Inpaint&&x()},[a]),u.useEffect(()=>{r(j.Default)},[e]);const w=n.findIndex(b=>b.asset_pointer===e.asset_pointer);return t.jsxs("div",{ref:m,className:"flex h-full w-full flex-col justify-between",children:[t.jsx(_t,{imageAsset:e,mode:a,setMode:r,clientThreadId:s,messageId:i,cursorWidth:f,setCursorWidth:l,inpaintingDrawingState:g,isLoadingNewImage:o}),t.jsx(At,{mode:a,imageIndex:w,allImages:n,onSwitchImage:b=>{K.setFocusedObject({type:de.Image,image:b,allImages:n,messageId:i})},isLoadingNewImage:o}),t.jsxs(Bt,{imageAsset:e,containerDimensions:c,isLoadingNewImage:o,children:[t.jsx(it,{className:"h-full w-full",alt:ce(e),src:e.url,width:e.width,height:e.height,fadeIn:!1}),a===j.Inpaint&&t.jsx("div",{className:"absolute inset-0",children:t.jsx(Ft,{drawingCanvasRef:S,color:"rgba(0, 122, 255, 0.5)",dashedOutlineColor:"rgba(255, 255, 255, 0.65)",cursorWidth:f,canvasWidth:e.width,canvasHeight:e.height,currentDrawnShape:p,onNewDrawnShape:y})})]})]})}export{bn as ImageEditor};
//# sourceMappingURL=lbq2awutv983x6w1.js.map
