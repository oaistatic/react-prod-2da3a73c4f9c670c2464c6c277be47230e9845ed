import{aa as c,Q as l,b as u,D as n,bz as f}from"./hggowi1ggrzb09yc.js";import{bI as d}from"./fc2hzad6rtrm7s5f.js";class h{async fetch(t,e){return await t.fetchQuery(this.makeQueryOptions(e))}makeQueryOptions(t){const e=d(t.asset.asset_pointer),s={...t,id:e};return{queryKey:["getFileDownloadLink",e,t.gizmoId,t.conversationId],queryFn:async()=>e.startsWith(c)?{...t.asset,url:e}:await w(s)}}}const D=new h;async function w({asset:o,gizmoId:t,id:e,isUnauthenticated:s,conversationId:i}){const r=await l.getFileDownloadLink(e,t,s,i).catch(a=>{throw a instanceof u||n.addError(new Error(`Could not fetch file with ID ${e} from file service`,{cause:a})),a});if(r.status!==f.Success)throw n.addError(`Could not fetch file with ID ${e} from file service`,r),new Error(`Could not fetch file with ID ${e} from file service`);return{...o,url:r.download_url}}export{D as A};
//# sourceMappingURL=ei7ej0cmjdt2qsbq.js.map
