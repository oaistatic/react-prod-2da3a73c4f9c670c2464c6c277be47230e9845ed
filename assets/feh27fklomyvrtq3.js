import{f4 as M,fp as R,d3 as g,fq as E,eM as F,aj as B,U as T,bu as N,q as O}from"./hggowi1ggrzb09yc.js";import{w as q,h as A,d as _,r as o,a as D,j as e}from"./izh0i1dfnf8ev7x1.js";import{t as y,a as m,u as H,s as L,C as j,b as Q,g as w,T as $,c as k,d as K}from"./fc2hzad6rtrm7s5f.js";import{g as V,C as G}from"./knizt02844mv3db5.js";import{T as U,C as W}from"./ne155y4529em4vcr.js";import{C as b,T as z}from"./ohyflymiror10qd4.js";import{C as J}from"./in3ze5ugryldzaj2.js";import"./oyoqdz9lwzk3lgxh.js";import"./l4ce2zdnnawhaijx.js";import"./gy64pge8qevmvg7e.js";import"./dxpde14qu5zfq5m7.js";import"./iejjcjl0eek5zfni.js";import"./hg9mdduuem2pvwuj.js";import"./bluopupp3hty4d7q.js";import"./iemgi2z64e5uqrv4.js";import"./lb1py1igp6jzrtce.js";import"./8nxoaz0vb9p890un.js";import"./gq56vmyv6ftpm8ay.js";import"./edwitfgce1i7kzg0.js";import"./ab6tyx2xygyb56l3.js";import"./hz86nu26alptyjds.js";import"./fzrn137102spawew.js";import"./d7bvxndom3b3tpj8.js";import"./ca7lq2gyndiywe6g.js";import"./h28ootcilxet47c8.js";import"./c9avu4yfkjav9bdb.js";import"./lx9hhkuca66lgvof.js";import"./bk8slwxjkdlmxjxm.js";import"./nn6gjrst5lwozesx.js";import"./d60wxt0885pttnzn.js";import"./mesuhiy66f679pn3.js";import"./bqaw7aag2c6iw58l.js";const Ee=()=>(R(),null),Fe=M(function(){const a=q(),[s]=A(),u=_(),p=y(a.conversationId),i=m(s.get("readonly"),!1),c=m(s.get("isFullScreen"),!1),d=m(s.get("header"),!0),l=m(s.get("appPreview"),!1),n=g(()=>E()),C=g(()=>F()),I=m(s.get("hideBottomComposer"),!!i),r=y(a.canmoreId),t=p,f=H();o.useEffect(()=>{L({type:j.Textdoc,textdocId:r})},[r]),Q(t,{kind:B.PrimaryAssistant});const h=D();if(o.useEffect(()=>(T.retainThread(t),()=>{setTimeout(()=>{h.invalidateQueries({queryKey:["conversation",t]})},0),T.releaseThread(t)}),[t,h]),o.useEffect(()=>{r||u("/")},[r,u]),o.useEffect(()=>{w().sendMessage({type:b.Loaded})},[r]),!r||f?.type!==j.Textdoc)return null;const P=()=>{w().sendMessage({type:b.Close})},S=i&&!d;return e.jsxs("div",{className:"h-full w-full overflow-hidden contain-content",children:[e.jsx("meta",{name:"viewport",content:"width=device-width, initial-scale=1, maximum-scale=1"}),e.jsx(J,{clientThreadId:t,children:e.jsx($,{clientThreadId:t,children:l?e.jsx(N,{children:e.jsx(X,{textdocId:f.textdocId})}):S?e.jsxs(e.Fragment,{children:[e.jsx(U,{disableScroll:!n,textdocId:f.textdocId}),e.jsx(W,{})]}):e.jsx(z,{isEmbedded:!0,isFullScreen:c,hideHeader:!d,hideBottomComposer:I,isReadonlyFromQueryParam:i,hideRenameButton:C,hideRunCode:!n,clientThreadId:t,focusedTextdoc:f,onClose:P},"textdocContent")})})]})}),X=({textdocId:x})=>{const a=o.useRef(null),s=k(x),[u,p]=o.useState(!1),i=s?.versions??[],c=O(i),d=o.useCallback(K(async l=>{const n=V(l.type,l.content);if(a.current&&(n==="react"||n==="html")){p(!0);const v=a.current.evalAsync({language:n,code:l.content});for await(const C of v)console.debug(C)}p(!1)},100),[]);return o.useEffect(()=>{c&&d(c)},[c,d]),e.jsx(G,{visuallyHidden:!u,ref:a,enableTransition:!0,title:""})};export{Ee as clientLoader,Fe as default};
//# sourceMappingURL=feh27fklomyvrtq3.js.map
