import{r as C,j as s,ax as E,M as H,av as w}from"./izh0i1dfnf8ev7x1.js";import{G as _}from"./j7xrr4x8o3ssozmz.js";import{ev as I,ew as P,U,ex as b,ey as A,ez as D,eA as O,eB as R,cF as B,cB as q,eC as W,eD as J,eE as K,eF as V,eG as X,X as $,eH as v,eI as N,eJ as Q}from"./fc2hzad6rtrm7s5f.js";import{ar as Y,r as Z,s as z,gb as ee,d as m,v as se,O as te,V as M,gc as ae,cl as k,ax as re,bt as ne}from"./hggowi1ggrzb09yc.js";import{u as oe,a as ie,t as le}from"./8nxoaz0vb9p890un.js";function T(){const{store:e}=I(),o=e.useSharedProps(),a=oe(),{clearSystemHintModeTrigger:r,getSystemHintModeTrigger:i}=ie(),{value:t}=Y("1988730211"),n=!P.useDisabledGlobally();return C.useCallback((l,c,d)=>{if(!o)return;const{clientThreadId:x,onCreateNewCompletion:h,onResetState:p,conversationMode:f}=o;U.hideThreadHeader();const g=a.has(b.Search),S=g?i(b.Search):void 0,j=Z(x),{systemHints:u,extraStreamParams:y}=t?A(Array.from(a)):{systemHints:Array.from(a),extraStreamParams:{}};n&&(y.enableMessageFollowups=!0),h({content:D(l),eventSource:"mouse",extraStreamParams:y,completionMetadata:{suggestions:c,suggestion:l,suggestionIndex:d,conversationMode:f??j?.mode,systemHints:u,searchSource:S},messageMetadata:{is_starter_prompt:!0,suggestion_type:l.type,starter_prompt_id:"id"in l?l.id:void 0}});const L=z.getMessageId(j);p(),O(l,d,x,L),ee()||le(),S&&g&&r(b.Search)},[o,a,i,t,r,n])}function ve({clientThreadId:e}){const{isUnauthenticated:o}=se(),a=!o,r=te(e),i=M(e,u=>u?.isLoading),t=ae(),n=k(),l=T(),c=M(e,u=>u?.modelId??B),d=q(c),{promptStarters:x,isSuccess:h,isError:p}=W(r&&!i,e,n?2:4,void 0,void 0,c??void 0),f=x&&x?.length>0,g=h&&f&&a&&!d,{layer:S}=re("4031588851"),j=S.get("is_two_line",!1);return s.jsx(s.Fragment,{children:s.jsx(E,{children:(p||h)&&s.jsxs(s.Fragment,{children:[s.jsx(ne,{className:`h-12 w-12 ${a?"":"max-sm:hidden"}`}),g&&s.jsx(ce,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.3},promptStarters:x,onSelectStarterPrompt:l,isSendBlocked:t,clientThreadId:e,isTwoLine:j}),!f&&a&&!d&&s.jsx(F,{}),d?s.jsx(J,{}):null,p&&a&&s.jsx(F,{})]})})})}function F(){return s.jsx("div",{className:"mt-7 text-3xl",children:s.jsx(H,{id:"24tuqq",defaultMessage:"Hi, how can I help?"})})}function ce({promptStarters:e,onSelectStarterPrompt:o,isSendBlocked:a,clientThreadId:r,isTwoLine:i,...t}){return C.useEffect(()=>{K(e,r)},[r]),s.jsx(s.Fragment,{children:i?s.jsx(w.div,{...t,className:"absolute bottom-6 w-full px-4",children:s.jsx(V,{children:s.jsx(xe,{starterPrompts:e,onSelectStarterPrompt:o,disabled:a})})}):s.jsx(w.div,{...t,children:s.jsx(G,{starterPrompts:e,onSelectStarterPrompt:o,disabled:a})})})}const de=/\s/;function G({starterPrompts:e,onSelectStarterPrompt:o,disabled:a,cssMobileDisplayLimit:r,marginOverride:i}){let t=e.map((n,l)=>{let c=n.oneliner??n.title;c===""&&(c=n.body);const d=de.test(c);return s.jsxs("button",{className:m(r!==void 0&&l>=r&&"max-sm:hidden","relative flex w-40 flex-col gap-2 rounded-2xl border border-token-border-light px-3 pb-4 pt-3 text-start align-top text-[15px] shadow-xxs transition enabled:hover:bg-token-main-surface-secondary disabled:cursor-not-allowed"),disabled:a,onClick:()=>o(n,e,l),children:[s.jsx(R,{category:n.category}),s.jsx("div",{className:m("line-clamp-3 max-w-full text-balance text-gray-600 dark:text-gray-500",d?"break-word":"break-all"),children:c})]},n.id??l)});if(t.length>2){const n=Math.floor(t.length/2);t=[t.slice(0,n),t.slice(n)].map((l,c)=>s.jsx("div",{className:"flex max-w-3xl flex-wrap items-stretch justify-center gap-4",children:l},c))}return s.jsx("div",{className:m("mx-3 flex max-w-3xl flex-wrap items-stretch justify-center gap-4",i??"mt-12"),children:t})}function xe({starterPrompts:e,onSelectStarterPrompt:o,disabled:a}){let r=e.map((t,n)=>s.jsx("button",{className:"relative whitespace-nowrap rounded-2xl border border-token-border-light px-4 py-2 text-start align-top text-[15px] shadow-xxs transition enabled:hover:bg-token-main-surface-secondary disabled:cursor-not-allowed",disabled:a,onClick:()=>o(t,e,n),children:s.jsxs("div",{className:"flex flex-col overflow-hidden",children:[t.title&&s.jsx("div",{className:"truncate font-semibold",children:t.title}),s.jsx("div",{className:m("truncate font-normal",t.title?"opacity-50":""),children:t.body})]})},t.id??n));const i=Math.floor(r.length/2);return r=[r.slice(0,i),r.slice(i)].map((t,n)=>s.jsx("div",{className:"flex flex-col gap-2",children:t},n)),s.jsx("div",{className:"grid w-full grid-flow-row grid-cols-[repeat(auto-fit,minmax(250px,1fr))] gap-2",children:r})}function be({gizmo:e,hideOwner:o=!1,children:a,className:r,avatarClassName:i,showStarterPrompts:t=!1,disableStarterPrompts:n=!1}){return e==null?null:s.jsx(s.Fragment,{children:s.jsxs("div",{className:m("flex h-full flex-col items-center justify-center text-token-text-primary","screen-arch:min-h-[calc(100dvh-var(--thread-leading-height)-var(--thread-trailing-height)-12px)]",r),children:[s.jsx(me,{gizmo:e,avatarClassName:i}),s.jsx(he,{gizmo:e,hideOwner:o,showStarterPrompts:t,disableStarterPrompts:n}),a]})})}function me({gizmo:e,avatarClassName:o}){const a=!!(e!=null&&X(e)&&e?.gizmo.tags?.includes($.FirstParty));return s.jsx("div",{className:"relative",children:s.jsx(_,{isFirstParty:a||!e,src:e!=null&&v(e)?e.profilePictureUrl:e?.gizmo.display.profile_picture_url,className:m("mb-3 h-12 w-12",o)})})}function ue({gizmo:e,disabled:o}){const a=Q(e),r=T(),i=k();if(a==null||a.length===0)return null;const t=a.slice(0,i?2:4);return s.jsx(G,{starterPrompts:t,onSelectStarterPrompt:r,disabled:o})}function he({gizmo:e,hideOwner:o,showStarterPrompts:a,disableStarterPrompts:r}){const i=e!=null&&v(e)?e.name:e?.gizmo.display.name,t=e!=null&&v(e)?e.description:e?.gizmo.display.description;return s.jsxs("div",{className:"flex flex-col items-center gap-2",children:[s.jsx("div",{className:"text-center text-2xl font-semibold",children:i}),!o&&s.jsx("div",{className:"flex items-center gap-1 text-token-text-tertiary",children:s.jsx(s.Fragment,{children:e&&v(e)?s.jsx(N,{gizmo:e}):s.jsx(N,{gizmo:e,socials:e.gizmo.author.display_socials})})}),t&&s.jsx("div",{className:"max-w-md text-center text-sm font-normal text-token-text-primary",children:t}),a&&s.jsx(ue,{gizmo:e,disabled:r})]})}export{be as G,me as L,xe as S,ve as a,T as u};
//# sourceMappingURL=jr1b41w4nuv00isi.js.map
