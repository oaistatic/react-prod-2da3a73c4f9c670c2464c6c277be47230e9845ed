const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/k8dtoutyyrqxv7wa.js","assets/izh0i1dfnf8ev7x1.js","assets/fc2hzad6rtrm7s5f.js","assets/hggowi1ggrzb09yc.js","assets/root-ko7rpr3h.css","assets/conversation-small-lgvqkxxm.css","assets/ojcgwgwujkn9jneg.js","assets/in3ze5ugryldzaj2.js","assets/8nxoaz0vb9p890un.js","assets/lb1py1igp6jzrtce.js","assets/ab6tyx2xygyb56l3.js","assets/j7xrr4x8o3ssozmz.js","assets/kh1pguo5uwldp8r4.js","assets/paq1bye12yp7s2hg.js","assets/ddzilicy6qtleo90.js","assets/hjbk0a4n40hheieo.js","assets/modzmagtrlhmunl0.js","assets/blsx6wjjcayih0as.js","assets/do4quzmvohudvw8e.js","assets/otmd3g07vng13akr.js"])))=>i.map(i=>d[i]);
import{br as P,g9 as F,aK as U,ae as I,d as _,bu as W,cj as E,bY as Q,h as V,ga as k,bv as $,bw as q,v as w,e2 as X,d3 as J,cc as K,e7 as Y,u as Z,el as ee,J as se}from"./hggowi1ggrzb09yc.js";import{R as te,a as ae,r as a,j as e,M as H,c as ne}from"./izh0i1dfnf8ev7x1.js";import{ej as re,ek as ie,cy as oe,el as ce,em as le,en as d,eo as ue,aa as de,bn as B,ai as me,a5 as fe,N as Se,ep as xe,cx as be,U as T,eq as ge,er as ye,es as he,et as z,eu as ve}from"./fc2hzad6rtrm7s5f.js";import{D as R,G as pe,S as je}from"./ojcgwgwujkn9jneg.js";import{u as Ce,H as Ie}from"./ecq5q109ux6uwiin.js";import{N as Ne}from"./in3ze5ugryldzaj2.js";const G=V({unableToLoadHistory:{id:"history.unableToLoad",defaultMessage:"Unable to load history"},retryButton:{id:"history.retryButton",defaultMessage:"Retry"}});function De({activeId:s,hideOverflowMenu:o}){const c=ae(),[n,r]=a.useState(!1),[l,u]=a.useState(0),m=F(),[h,S]=a.useState(!1),i=re(),v=ie(),{conversations:p,hasNextPage:j,fetchNextPage:N,isLoading:f,isFetchingNextPage:M,isError:D}=oe({}),x=a.useRef(null),O=a.useCallback(t=>{f||t==null||(x.current?.disconnect(),x.current=new IntersectionObserver(L=>{L[0].isIntersecting&&j&&N()}),x.current.observe(t))},[f,j,N]);a.useEffect(()=>()=>{x.current?.disconnect()},[]),a.useMemo(()=>{U.publish({kind:"refreshHistory",conversations:p})},[p]);const C=p;a.useEffect(()=>{const t=ce(le(),Date.now());m(()=>{u(l+1)},t+1e3)},[l,m]);const b=C.length===0;d.markStart("History",d.NS_SIDEBAR),I()?.data!=null&&!f&&d.markRendered("History",d.NS_SIDEBAR);const A=Ce(C,l),g=i!=null&&i.kind==="conversation"&&i.gizmoId!=null&&ue(i.gizmoId),y=a.useRef(0);return e.jsxs(ke,{$centered:f||D||b,onDragOver:t=>{t.preventDefault(),g&&S(!0)},onDrop:t=>{t.preventDefault(),g&&(y.current=0,S(!1),v({newGizmoId:null,conversation:i.conversation,previousGizmoId:i.gizmoId??null}))},onDragEnter:t=>{t.preventDefault(),g&&(y.current+=1)},onDragLeave:t=>{t.preventDefault(),g&&(y.current-=1,y.current===0&&S(!1))},className:_(h&&"opacity-50"),children:[b&&f&&e.jsx(W,{children:e.jsx(E,{className:"m-auto"})}),b&&D&&e.jsxs("div",{className:"p-3 text-center italic text-token-text-tertiary",children:[e.jsx(H,{...G.unableToLoadHistory}),!n&&e.jsx("div",{className:"mt-1",children:e.jsx(Q,{as:"button",color:"primary",size:"small",className:"m-auto mt-2",onClick:()=>{r(!0),de(c)},children:e.jsx(H,{...G.retryButton})})})]}),!f&&!b&&e.jsx("div",{children:e.jsx(Ie,{activeId:s,bucketedItems:A,hasNextPage:j,items:C,infiniteScrollTriggerElementRef:O,hideOverflowMenu:o})}),M&&e.jsx("div",{className:"m-4 mb-5 flex justify-center",children:e.jsx(E,{})})]})}const Ee=te.memo(De),ke=P.div`flex flex-col gap-2 text-token-text-primary text-sm mt-5 first:mt-0
${({$centered:s})=>[s&&"h-full justify-center items-center empty:hidden"]}`;function He({currentGizmoId:s}){const o=B(),c=I(),{data:{gizmos:n}={}}=me();let r=n;o&&(r=n?.filter(m=>!fe(m.resource))),d.markStart("GizmoSidebarList",d.NS_SIDEBAR),r!==void 0&&d.markRendered("GizmoSidebarList",d.NS_SIDEBAR);const l=k("2152104812","hide_gpts_if_none",!1),u=k("2152104812","hide_default_gpts",!1);return c?l&&n?.length===0?!u&&e.jsx(R,{isNewConversation:!0}):e.jsxs(e.Fragment,{children:[!u&&e.jsx(R,{isNewConversation:!0}),e.jsx(pe,{gizmo:r??[],currentGizmoId:s,maxToShowOnLoad:7})]}):null}const Te=$(()=>q(()=>import("./k8dtoutyyrqxv7wa.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19])).then(s=>s.FannyPackAction));function ze({clientThreadId:s}){const o=Z(s);I();const{isUnauthenticated:c}=w(),n=ee(s),r=se(),l=B(),[u,m]=a.useState(!1),h=a.useCallback(i=>i===z.Snorlax?u:!1,[u]),S=a.useCallback((i,v)=>{i===z.Snorlax&&m(v)},[]);return e.jsx(ve,{value:{isSidebarFlyoutOpen:h,onSidebarFlyoutOpenChange:S},children:e.jsxs("div",{className:"group/sidebar",children:[!c&&e.jsx(He,{currentGizmoId:n}),null,l&&e.jsx(je,{currentGizmoId:n}),null,null,!c&&e.jsx(Ee,{activeId:r?void 0:o})]})})}function Le({clientThreadId:s}){const{isUnauthenticated:o}=w();return o?null:e.jsx(ze,{clientThreadId:s})}function Pe({className:s,onNewThread:o}){const c=ne(),n=X(),r=J(()=>navigator.windowControlsOverlay),{isFannyPackEnabled:l}=Se(),u=xe();return e.jsxs("div",{className:_("flex",r?.visible&&r.getTitlebarAreaRect().left>0?"justify-end":"justify-between",s),children:[e.jsx(K,{sideOffset:4,label:c.formatMessage({id:"e7SzX9",defaultMessage:"Close sidebar"}),className:"flex",side:"right",children:e.jsx(be,{className:"no-draggable","aria-label":c.formatMessage({id:"e7SzX9",defaultMessage:"Close sidebar"}),onClick:()=>{Y(n)?T.toggleNavSidebar():T.togglePopoverNavSidebar()},icon:u?ge:ye,mobileIcon:he,"data-testid":"close-sidebar-button"})}),e.jsxs("div",{className:"flex",children:[l&&e.jsx(Te,{}),e.jsx(Ne,{onClick:o,testId:"create-new-chat-button"})]})]})}export{Le as C,He as G,Ee as H,Pe as S};
//# sourceMappingURL=m7r17aksjqnnuufi.js.map
